<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # 1. Remove .html extension for cleaner URLs
  RewriteCond %{THE_REQUEST} ^GET\ (.*)\.html\ HTTP
  RewriteRule (.*)\.html$ $1 [R=301,L]

  # 2. Trailing Slash Enforcement
  # Redirects /foo to /foo/ if it's not a file request
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_URI} !index.php
  RewriteCond %{REQUEST_URI} !index.html
  RewriteCond %{REQUEST_URI} !/$
  RewriteRule (.*) $1/ [R=301,L]

  # 3. SPA Fallback / 404 Handling
  # If the file or directory does not exist, rewrite to index.html
  # This allows the React app to load and show the custom 404 component
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.html [L]
</IfModule>

# 4. Server-side Error Document (Backup)
ErrorDocument 404 /404.html
